# ShelfScanApp 外部設計書

## 1. アプリ概要
- 「購入予定品」の登録・管理・更新を行う Web アプリケーション。  
- FastAPI + GAS + Google Spreadsheet を連携し、実用可能な UI/UX を追求する。

## 2. 利用者
- （未記載）

## 3. 機能一覧
- **品目一覧表示**：購入予定品をテーブル形式で表示
- **品目追加**：商品名・価格・期限を入力し登録
- **購入済み更新**：状態（`status`） = `"done"` に変更
- **処理中表示**：ボタン操作時にスピナー＋文言で状態表示

## 4. 画面構成

### 4.1 一覧画面
未購入品目の表示を行う
- テーブル表示（品名／価格／期限／状態／操作）
- フィルタ：状態（`status`） === `"pending"` のみ表示
- 操作ボタン：購入済み(ステータス更新)

### 4.2 登録フォーム
新規に購入したい品目の登録を行う
- 入力項目：品名（必須）、価格（任意）、期限（任意）
- ボタン：品目を追加（処理中表示あり）

## 5. 技術構成

| 機能           | 技術スタック                     |
|---------------|----------------------------------|
| フロントエンド  | GitHub Pages + HTML/CSS/JS       |
| バックエンド    | FastAPI（Render.com上でホスト） |
| データベース    | Google Apps Script + スプレッドシート |
| 通知            | SendGrid API                     |

## 6. FastAPI API設計

### GET `/shelf/items`
- **機能**：購入予定品の一覧取得
- **クエリパラメータ（任意）**：`status=pending`

### POST `/shelf/items`
- **機能**：購入予定品の新規登録
- **リクエストボディ**： 
```json
 {
    "name": "商品A",
    "price": 1200,
    "deadline": "2025-08-23"
  }
  ```

### PUT `/shelf/items/{id}`
- **機能**：購入済みステータスへの更新
- **リクエストボディ**：
```json
  {
    "status": "done"
  }
```

### DELETE `/shelf/items/{id}`
- 機能：品目の削除

## 7. GAS連携
- FastAPI → GAS WebApp に `action` パラメータ付きでリクエスト
- GAS 側で Spreadsheet を操作（追加／更新／削除／一覧）

## 8. GAS API設計
shelf_sacn_app(GAS_API仕様).pdfを参照

## 9. UI/UX設計方針
- **処理中表示**：スピナー＋文言変更＋ボタン無効化
- **誤操作防止**：二重クリック防止、削除時の確認ダイアログ
- **視認性**：テーブル形式、完了品は `line-through` 表示

